# cargo-hakari configuration
# https://docs.rs/cargo-hakari/latest/cargo_hakari/config/
#
# Run `cargo hakari generate` to create/update the workspace-hack crate
# Run `cargo hakari manage-deps` to add workspace-hack dependencies to all crates

# Name of the workspace-hack crate
hakari-package = "workspace-hack"

# Cargo resolver version (3 for Rust 2024 edition)
resolver = "3"

# Format version for workspace-hack dependency lines
dep-format-version = "4"

# Target platforms for optimization
# These are the platforms we actively support and test
platforms = [
    "x86_64-unknown-linux-gnu",
    "aarch64-unknown-linux-gnu",
    "x86_64-apple-darwin",
    "aarch64-apple-darwin",
    "x86_64-pc-windows-msvc",
]

# Use exact versions (false = use caret requirements like "^1.0")
exact-versions = false

# Crates to exclude from workspace-hack unification
[traversal-excludes]
# Procedural macro crates compile separately and don't benefit from unification
# Build automation (xtask) and test infrastructure also excluded
workspace-members = [
    "mssql-derive",
    "xtask",
    "mssql-testing",
]

# Test-only third-party dependencies don't need unification
third-party = [
    { name = "criterion" },
    { name = "proptest" },
    { name = "testcontainers" },
    { name = "tokio-test" },
]

[final-excludes]
workspace-members = []
# Proc-macro helper crates can't be unified
third-party = [
    { name = "syn" },
    { name = "quote" },
    { name = "proc-macro2" },
]
